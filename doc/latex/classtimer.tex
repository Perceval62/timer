\hypertarget{classtimer}{}\section{timer Class Reference}
\label{classtimer}\index{timer@{timer}}


timer my\+Timer(\char`\"{}my\+Timer\+Name\char`\"{}, 1000, my\+Func)  




{\ttfamily \#include $<$timer.\+hpp$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classtimer_ac8d672339f972a1146ea2d90ca2ef89a}{timer} (std\+::string name, unsigned int delay, void($\ast$cb)(void $\ast$), void $\ast$params)
\begin{DoxyCompactList}\small\item\em Constructors. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classtimer_aee05958ea6b0fbf36ea1fd22747cd546}\label{classtimer_aee05958ea6b0fbf36ea1fd22747cd546}} 
\hyperlink{classtimer_aee05958ea6b0fbf36ea1fd22747cd546}{$\sim$timer} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classtimer_a8c068c53de6269fc3ced75cf27bf4ea6}{to\+\_\+string} ()
\item 
bool \hyperlink{classtimer_adad85b4705278d4cb8a2a4f3286cc2c7}{start} ()
\item 
bool \hyperlink{classtimer_ad21a0c9113d870f8485b775f1fcd3c73}{stop} ()
\item 
void \hyperlink{classtimer_ae3dce84bbcd9a7022a20e2b63174aa61}{set\+Name} (std\+::string new\+Name)
\item 
std\+::string \hyperlink{classtimer_a30d5e497b9bee9b2d00c7f511c85e84d}{get\+Name} ()
\item 
bool \hyperlink{classtimer_a35c72b981bb55b98e979f83a988f434c}{get\+State} ()
\item 
unsigned int \hyperlink{classtimer_ab00cba4ccf638a425b9f6db10d2fd16f}{get\+Delay} ()
\item 
bool \hyperlink{classtimer_acd8ddd948bf96185cf3c1e0a4cf60264}{set\+Delay} (unsigned int new\+Delay)
\item 
bool \hyperlink{classtimer_a75f1f309bb222687385ede7d2d8233c3}{set\+Callback} (void($\ast$cb)(void $\ast$), void $\ast$params)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
timer my\+Timer(\char`\"{}my\+Timer\+Name\char`\"{}, 1000, my\+Func) 

This is an implementation of a timer in cpp. It is initialised with a callback function that is to be called at certain intervals \begin{DoxyAuthor}{Author}
Vincent Perrier 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
25-\/04-\/2020 
\end{DoxyDate}


Definition at line 14 of file timer.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classtimer_ac8d672339f972a1146ea2d90ca2ef89a}\label{classtimer_ac8d672339f972a1146ea2d90ca2ef89a}} 
\index{timer@{timer}!timer@{timer}}
\index{timer@{timer}!timer@{timer}}
\subsubsection{\texorpdfstring{timer()}{timer()}}
{\footnotesize\ttfamily timer\+::timer (\begin{DoxyParamCaption}\item[{std\+::string}]{name,  }\item[{unsigned int}]{delay,  }\item[{void($\ast$)(void $\ast$)}]{cb,  }\item[{void $\ast$}]{params }\end{DoxyParamCaption})}



Constructors. 


\begin{DoxyParams}{Parameters}
{\em name} & unique name of the timer. Used for getting a description. \\
\hline
{\em delay} & The interval at which the callback function is going to be called. \\
\hline
{\em cb} & The function to call at the given interval. \\
\hline
{\em params} & Parameters to be given to the callback function \\
\hline
\end{DoxyParams}


Definition at line 18 of file timer.\+cpp.


\begin{DoxyCode}
18                                                                                     :
19     name(name),
20     t1(NULL),
21     activated(\textcolor{keyword}{false}),
22     execDelay(delay),
23     callback(cb),
24     params(params)
25 \{
26     \textcolor{keywordflow}{if}(delay == 0)
27     \{
28         delay = 100;
29     \}
30 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classtimer_ab00cba4ccf638a425b9f6db10d2fd16f}\label{classtimer_ab00cba4ccf638a425b9f6db10d2fd16f}} 
\index{timer@{timer}!get\+Delay@{get\+Delay}}
\index{get\+Delay@{get\+Delay}!timer@{timer}}
\subsubsection{\texorpdfstring{get\+Delay()}{getDelay()}}
{\footnotesize\ttfamily unsigned int timer\+::get\+Delay (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Gets the current delay of the timer \begin{DoxyReturn}{Returns}
True if the timer is activated 
\end{DoxyReturn}


Definition at line 184 of file timer.\+cpp.


\begin{DoxyCode}
185 \{
186    \textcolor{keywordflow}{return} this->execDelay;
187 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_a30d5e497b9bee9b2d00c7f511c85e84d}\label{classtimer_a30d5e497b9bee9b2d00c7f511c85e84d}} 
\index{timer@{timer}!get\+Name@{get\+Name}}
\index{get\+Name@{get\+Name}!timer@{timer}}
\subsubsection{\texorpdfstring{get\+Name()}{getName()}}
{\footnotesize\ttfamily std\+::string timer\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Gets the current name of the timer \begin{DoxyReturn}{Returns}
Returns the current name of the timer 
\end{DoxyReturn}


Definition at line 168 of file timer.\+cpp.


\begin{DoxyCode}
169 \{
170     \textcolor{keywordflow}{return} this->name;
171 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_a35c72b981bb55b98e979f83a988f434c}\label{classtimer_a35c72b981bb55b98e979f83a988f434c}} 
\index{timer@{timer}!get\+State@{get\+State}}
\index{get\+State@{get\+State}!timer@{timer}}
\subsubsection{\texorpdfstring{get\+State()}{getState()}}
{\footnotesize\ttfamily bool timer\+::get\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Gets the current state of the timer \begin{DoxyReturn}{Returns}
True if the timer is activated 
\end{DoxyReturn}


Definition at line 176 of file timer.\+cpp.


\begin{DoxyCode}
177 \{
178     \textcolor{keywordflow}{return} this->activated;
179 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_a75f1f309bb222687385ede7d2d8233c3}\label{classtimer_a75f1f309bb222687385ede7d2d8233c3}} 
\index{timer@{timer}!set\+Callback@{set\+Callback}}
\index{set\+Callback@{set\+Callback}!timer@{timer}}
\subsubsection{\texorpdfstring{set\+Callback()}{setCallback()}}
{\footnotesize\ttfamily bool timer\+::set\+Callback (\begin{DoxyParamCaption}\item[{void($\ast$)(void $\ast$)}]{cb,  }\item[{void $\ast$}]{params }\end{DoxyParamCaption})}

Changes the current callback function of the timer \begin{DoxyReturn}{Returns}
True if the timer is activated 
\end{DoxyReturn}


Definition at line 217 of file timer.\+cpp.


\begin{DoxyCode}
218 \{
219     \textcolor{comment}{//If object contains empty parameters}
220     \textcolor{keywordflow}{if}(this->callback == NULL)
221     \{
222         this->callback = cb;
223         this->params = params;
224         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
225     \}
226 
227     \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{false};
228     \textcolor{keywordflow}{if}(this->\hyperlink{classtimer_ad21a0c9113d870f8485b775f1fcd3c73}{stop}() == \textcolor{keyword}{true})
229     \{
230         this->callback = cb;
231         this->params = params;
232         \textcolor{keywordflow}{if}(this->\hyperlink{classtimer_adad85b4705278d4cb8a2a4f3286cc2c7}{start}() == \textcolor{keyword}{true})
233         \{
234             ret = \textcolor{keyword}{true};
235         \}
236     \}
237     \textcolor{keywordflow}{return}(ret);
238 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_acd8ddd948bf96185cf3c1e0a4cf60264}\label{classtimer_acd8ddd948bf96185cf3c1e0a4cf60264}} 
\index{timer@{timer}!set\+Delay@{set\+Delay}}
\index{set\+Delay@{set\+Delay}!timer@{timer}}
\subsubsection{\texorpdfstring{set\+Delay()}{setDelay()}}
{\footnotesize\ttfamily bool timer\+::set\+Delay (\begin{DoxyParamCaption}\item[{unsigned int}]{new\+Delay }\end{DoxyParamCaption})}

Changes the current execution interval of the timer \begin{DoxyReturn}{Returns}
True if the timer is activated 
\end{DoxyReturn}


Definition at line 192 of file timer.\+cpp.


\begin{DoxyCode}
193 \{
194     \textcolor{comment}{//If object contains empty parameters}
195     \textcolor{keywordflow}{if}(this->callback == NULL)
196     \{
197         this->execDelay = newDelay;
198         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
199     \}
200 
201     \textcolor{comment}{//If callback as been given}
202     \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{false};
203     \textcolor{keywordflow}{if}(this->\hyperlink{classtimer_ad21a0c9113d870f8485b775f1fcd3c73}{stop}() == \textcolor{keyword}{true})
204     \{
205         this->execDelay = newDelay;
206         \textcolor{keywordflow}{if}(this->\hyperlink{classtimer_adad85b4705278d4cb8a2a4f3286cc2c7}{start}() == \textcolor{keyword}{true})
207         \{
208             ret = \textcolor{keyword}{true};
209         \}
210     \}
211     \textcolor{keywordflow}{return}(ret);
212 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_ae3dce84bbcd9a7022a20e2b63174aa61}\label{classtimer_ae3dce84bbcd9a7022a20e2b63174aa61}} 
\index{timer@{timer}!set\+Name@{set\+Name}}
\index{set\+Name@{set\+Name}!timer@{timer}}
\subsubsection{\texorpdfstring{set\+Name()}{setName()}}
{\footnotesize\ttfamily void timer\+::set\+Name (\begin{DoxyParamCaption}\item[{std\+::string}]{new\+Name }\end{DoxyParamCaption})}

Changes the name of the timer \begin{DoxyReturn}{Returns}
Returns true if the change is successful 
\end{DoxyReturn}


Definition at line 160 of file timer.\+cpp.


\begin{DoxyCode}
161 \{
162     this->name = newName;
163 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_adad85b4705278d4cb8a2a4f3286cc2c7}\label{classtimer_adad85b4705278d4cb8a2a4f3286cc2c7}} 
\index{timer@{timer}!start@{start}}
\index{start@{start}!timer@{timer}}
\subsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily bool timer\+::start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Start the timer \begin{DoxyReturn}{Returns}
Return a boolean representing the success or failure of the function. 
\end{DoxyReturn}
if the delay is not smaller than

the max value for int 

Definition at line 62 of file timer.\+cpp.


\begin{DoxyCode}
63 \{
64     \textcolor{comment}{//if no callback function was given}
65     \textcolor{keywordflow}{if}(this->callback == NULL)
66     \{
67         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
68     \}
69     \textcolor{comment}{// prevent integer overflow}
70     \textcolor{keywordflow}{if}(!(this->execDelay < UINT\_MAX))    
71     \{
73         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
74     \}
75     
76 
77     std::mutex m;
78     m.try\_lock();
79     \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{false};
80     \textcolor{comment}{//if the object is already timing or callback hasnt been provided,}
81     \textcolor{keywordflow}{if}(this->t1 != NULL)
82     \{
83         ret = \textcolor{keyword}{false};
84     \}
85     \textcolor{keywordflow}{else}
86     \{
87         \textcolor{comment}{//Go ahead}
88         \textcolor{keywordflow}{try}
89         \{
90             this->activated = \textcolor{keyword}{true};
91             t1 = \textcolor{keyword}{new} std::thread(&timer::count, \textcolor{keyword}{this});
92             ret = \textcolor{keyword}{true};
93         \}
94         \textcolor{keywordflow}{catch}(\textcolor{keyword}{const} std::exception& e)
95         \{
96             std::cerr << e.what() << \textcolor{charliteral}{'\(\backslash\)n'};
97             ret = \textcolor{keyword}{false};
98         \}
99     \}
100     m.unlock();
101     \textcolor{keywordflow}{return} ret;
102 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_ad21a0c9113d870f8485b775f1fcd3c73}\label{classtimer_ad21a0c9113d870f8485b775f1fcd3c73}} 
\index{timer@{timer}!stop@{stop}}
\index{stop@{stop}!timer@{timer}}
\subsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily bool timer\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Stops the timer \begin{DoxyReturn}{Returns}
Return a boolean representing the success or failure of the function. 
\end{DoxyReturn}


Definition at line 108 of file timer.\+cpp.


\begin{DoxyCode}
109 \{
110     \textcolor{comment}{//If the thread doesnt exist}
111     \textcolor{keywordflow}{if}(this->t1 == NULL)
112     \{
113         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
114     \};
115     
116     std::mutex m;
117     m.try\_lock();
118     \textcolor{comment}{//return value}
119     \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{false};
120     \textcolor{keywordflow}{try}
121     \{    
122         \textcolor{comment}{//Change the object's state}
123         this->activated = \textcolor{keyword}{false};
124         \textcolor{comment}{//Cleanup the thread}
125         this->t1->join();
126         \textcolor{keyword}{delete} this->t1;
127         \textcolor{comment}{//Resetting the pointer as available}
128         this->t1 = NULL;
129         ret = \textcolor{keyword}{true};
130     \}
131     \textcolor{keywordflow}{catch}(\textcolor{keyword}{const} std::exception& e)
132     \{
133         \textcolor{comment}{//Error handling with a stack trace}
134         std::cerr << e.what() << \textcolor{charliteral}{'\(\backslash\)n'};
135         ret = \textcolor{keyword}{false};
136     \}
137     m.unlock();
138     \textcolor{keywordflow}{return} ret;
139 \}
\end{DoxyCode}
\mbox{\Hypertarget{classtimer_a8c068c53de6269fc3ced75cf27bf4ea6}\label{classtimer_a8c068c53de6269fc3ced75cf27bf4ea6}} 
\index{timer@{timer}!to\+\_\+string@{to\+\_\+string}}
\index{to\+\_\+string@{to\+\_\+string}!timer@{timer}}
\subsubsection{\texorpdfstring{to\+\_\+string()}{to\_string()}}
{\footnotesize\ttfamily std\+::string timer\+::to\+\_\+string (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyReturn}{Returns}
Return a string describing the state of the timer 
\end{DoxyReturn}


Definition at line 41 of file timer.\+cpp.


\begin{DoxyCode}
42 \{
43     std::string ret;
44     std::string state;
45     \textcolor{keywordflow}{if}(this->activated == \textcolor{keyword}{true})
46     \{
47         state = \textcolor{stringliteral}{"This timer is currently active"};
48     \}
49     \textcolor{keywordflow}{else}
50     \{
51         state = \textcolor{stringliteral}{"This timer is currently idle"};
52     \}
53     
54     ret = this->name + \textcolor{stringliteral}{" : a is set with a timer of "} + std::to\_string(this->execDelay) + \textcolor{stringliteral}{"ms. "} + state ;
55     \textcolor{keywordflow}{return} ret;
56 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/timer.\+hpp\item 
src/timer.\+cpp\end{DoxyCompactItemize}
